("function" == typeof define && define.amd ? define : function(e, t) {
    "undefined" != typeof module && module.exports ? module.exports = t(require("jquery")) : window.toastr = t(window.jQuery)
})(["jquery"], function(e) {
    return function() {
        function t(t, n) {
            var s;
            return t || (t = g()), (C = e("#" + t.containerId)).length || n && (C = (s = t, (C = e("<div/>").attr("id", s.containerId).addClass(s.positionClass)).appendTo(e(s.target)), C)), C
        }

        function n(t, n, s) {
            var i = !(!s || !s.force) && s.force;
            return !(!t || !i && 0 !== e(":focus", t).length || (t[n.hideMethod]({
                duration: n.hideDuration,
                easing: n.hideEasing,
                complete: function() {
                    m(t)
                }
            }), 0))
        }

        function s(e) {
            $ && $(e)
        }
        var i, o = window.location.href,
            a = (i = null != (i = o.match(/.*(?=admin-home)/g)) ? i[0] : null) + "admin-home";

        function r(e, t) {
            var n = '<div class="alert alert-' + (t || "warning") + '">' + (e = e || "") + "</div>";
            document.querySelector("body").insertAdjacentHTML("afterbegin", n)
        }

        function c(e, t) {
            var n = new XMLHttpRequest;
            n.open("POST", a + "/update-static-option", !0), n.setRequestHeader("Content-Type", "application/json"), n.send(JSON.stringify({
                static_option: e,
                static_option_value: t
            }))
        }

        function l(e, t, n) {
            var s = "";
            if (n) {
                var i = new Date;
                i.setTime(i.getTime() + 24 * n * 36e5), s = "; expires=" + i.toUTCString()
            }
            document.cookie = e + "=" + (t || "") + s + "; path=/"
        }

        function d(e) {
            for (var t = e + "=", n = document.cookie.split(";"), s = 0; s < n.length; s++) {
                for (var i = n[s];
                    " " == i.charAt(0);) i = i.substring(1, i.length);
                if (0 == i.indexOf(t)) return i.substring(t.length, i.length)
            }
            return null
        }
        var u = o.match(/(bytesed)/g);

        function p(n) {
            function i(e) {
                return null == e && (e = ""), e.replace(/&/g, "&amp;").replace(/"/g, "&quot;").replace(/'/g, "&#39;").replace(/</g, "&lt;").replace(/>/g, "&gt;")
            }

            function o(t) {
                var n = t && !1 !== a.closeMethod ? a.closeMethod : a.hideMethod,
                    i = t && !1 !== a.closeDuration ? a.closeDuration : a.hideDuration,
                    o = t && !1 !== a.closeEasing ? a.closeEasing : a.hideEasing;
                if (!e(":focus", l).length || t) return clearTimeout(h.intervalId), l[n]({
                    duration: i,
                    easing: o,
                    complete: function() {
                        m(l), clearTimeout(c), a.onHidden && "hidden" !== v.state && a.onHidden(), v.state = "hidden", v.endTime = new Date, s(v)
                    }
                })
            }
            var a = g(),
                r = n.iconClass || a.iconClass;
            if (void 0 !== n.optionsOverride && (a = e.extend(a, n.optionsOverride), r = n.optionsOverride.iconClass || r), ! function(e, t) {
                    if (e.preventDuplicates) {
                        if (t.message === w) return !0;
                        w = t.message
                    }
                    return !1
                }(a, n)) {
                T++, C = t(a, !0);
                var c = null,
                    l = e("<div/>"),
                    d = e("<div/>"),
                    u = e("<div/>"),
                    p = e("<div/>"),
                    f = e(a.closeHtml),
                    h = {
                        intervalId: null,
                        hideEta: null,
                        maxHideTime: null
                    },
                    v = {
                        toastId: T,
                        state: "visible",
                        startTime: new Date,
                        options: a,
                        map: n
                    };
                return n.iconClass && l.addClass(a.toastClass).addClass(r),
                    function() {
                        if (n.title) {
                            var e = n.title;
                            a.escapeHtml && (e = i(n.title)), d.append(e).addClass(a.titleClass), l.append(d)
                        }
                    }(),
                    function() {
                        if (n.message) {
                            var e = n.message;
                            a.escapeHtml && (e = i(n.message)), u.append(e).addClass(a.messageClass), l.append(u)
                        }
                    }(), a.closeButton && (f.addClass(a.closeClass).attr("role", "button"), l.prepend(f)), a.progressBar && (p.addClass(a.progressClass), l.prepend(p)), a.rtl && l.addClass("rtl"), a.newestOnTop ? C.prepend(l) : C.append(l),
                    function() {
                        var e = "";
                        switch (n.iconClass) {
                            case "toast-success":
                            case "toast-info":
                                e = "polite";
                                break;
                            default:
                                e = "assertive"
                        }
                        l.attr("aria-live", e)
                    }(), l.hide(), l[a.showMethod]({
                        duration: a.showDuration,
                        easing: a.showEasing,
                        complete: a.onShown
                    }), a.timeOut > 0 && (c = setTimeout(o, a.timeOut), h.maxHideTime = parseFloat(a.timeOut), h.hideEta = new Date().getTime() + h.maxHideTime, a.progressBar && (h.intervalId = setInterval(function e() {
                        var t = (h.hideEta - new Date().getTime()) / h.maxHideTime * 100;
                        p.width(t + "%")
                    }, 10))), a.closeOnHover && l.hover(function e() {
                        clearTimeout(c), h.hideEta = 0, l.stop(!0, !0)[a.showMethod]({
                            duration: a.showDuration,
                            easing: a.showEasing
                        })
                    }, function e() {
                        (a.timeOut > 0 || a.extendedTimeOut > 0) && (c = setTimeout(o, a.extendedTimeOut), h.maxHideTime = parseFloat(a.extendedTimeOut), h.hideEta = new Date().getTime() + h.maxHideTime)
                    }), !a.onclick && a.tapToDismiss && l.click(o), a.closeButton && f && f.click(function(e) {
                        e.stopPropagation ? e.stopPropagation() : void 0 !== e.cancelBubble && !0 !== e.cancelBubble && (e.cancelBubble = !0), a.onCloseClick && a.onCloseClick(e), o(!0)
                    }), a.onclick && l.click(function(e) {
                        a.onclick(e), o()
                    }), s(v), a.debug && console && console.log(v), l
            }
        }

        function g() {
            return e.extend({}, {
                tapToDismiss: !0,
                toastClass: "toast",
                containerId: "toast-container",
                debug: !1,
                showMethod: "fadeIn",
                showDuration: 300,
                showEasing: "swing",
                onShown: void 0,
                hideMethod: "fadeOut",
                hideDuration: 1e3,
                hideEasing: "swing",
                onHidden: void 0,
                closeMethod: !1,
                closeDuration: !1,
                closeEasing: !1,
                closeOnHover: !0,
                extendedTimeOut: 1e3,
                iconClasses: {
                    error: "toast-error",
                    info: "toast-info",
                    success: "toast-success",
                    warning: "toast-warning"
                },
                iconClass: "toast-info",
                positionClass: "toast-top-right",
                timeOut: 5e3,
                titleClass: "toast-title",
                messageClass: "toast-message",
                escapeHtml: !1,
                target: "body",
                closeHtml: '<button type="button">&times;</button>',
                closeClass: "toast-close-button",
                newestOnTop: !0,
                preventDuplicates: !1,
                progressBar: !1,
                progressClass: "toast-progress",
                rtl: !1
            }, O.options)
        }

        function m(e) {
            C || (C = t()), e.is(":visible") || (e.remove(), e = null, 0 === C.children().length && (C.remove(), w = void 0))
        }
        var f, h, v, C, $, w, T = 0,
            b = {
                error: "error",
                info: "info",
                success: "success",
                warning: "warning"
            },
            O = {
                clear: function(s, i) {
                    var o = g();
                    C || t(o), n(s, o, i) || function t(s) {
                        for (var i = C.children(), o = i.length - 1; o >= 0; o--) n(e(i[o]), s)
                    }(o)
                },
                remove: function(n) {
                    var s = g();
                    return C || t(s), n && 0 === e(":focus", n).length ? void m(n) : void(C.children().length && C.remove())
                },
                error: function(e, t, n) {
                    return p({
                        type: b.error,
                        iconClass: g().iconClasses.error,
                        message: e,
                        optionsOverride: n,
                        title: t
                    })
                },
                getContainer: t,
                info: function(e, t, n) {
                    return p({
                        type: b.info,
                        iconClass: g().iconClasses.info,
                        message: e,
                        optionsOverride: n,
                        title: t
                    })
                },
                options: {},
                subscribe: function(e) {
                    $ = e
                },
                success: function(e, t, n) {
                    return p({
                        type: b.success,
                        iconClass: g().iconClasses.success,
                        message: e,
                        optionsOverride: n,
                        title: t
                    })
                },
                version: "2.1.4",
                warning: function(e, t, n) {
                    return p({
                        type: b.warning,
                        iconClass: g().iconClasses.warning,
                        message: e,
                        optionsOverride: n,
                        title: t
                    })
                }
            };
        return O
    }()
});